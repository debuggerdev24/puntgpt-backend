# Generated by Django 5.2.8 on 2025-12-01 08:18

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Horse',
            fields=[
                ('horse_id', models.BigIntegerField(primary_key=True, serialize=False)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('last_win', models.DateField(blank=True, null=True)),
                ('average_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('total_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=14, null=True)),
                ('colour', models.CharField(blank=True, max_length=20)),
                ('sex', models.CharField(blank=True, max_length=10)),
                ('age', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('foal_date', models.DateField(blank=True, null=True)),
                ('sire', models.CharField(blank=True, max_length=100)),
                ('dam', models.CharField(blank=True, max_length=100)),
                ('damsire', models.CharField(blank=True, max_length=100)),
                ('breeder', models.CharField(blank=True, max_length=200)),
                ('owners', models.TextField(blank=True)),
                ('silks_image', models.URLField(blank=True)),
                ('training_location', models.CharField(blank=True, max_length=100)),
                ('last_10_starts', models.CharField(blank=True, max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Horses',
            },
        ),
        migrations.CreateModel(
            name='Jockey',
            fields=[
                ('jockey_id', models.BigIntegerField(primary_key=True, serialize=False)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('last_win', models.DateField(blank=True, null=True)),
                ('total_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=14, null=True)),
                ('average_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('state', models.CharField(blank=True, max_length=10)),
                ('country', models.CharField(blank=True, max_length=50)),
                ('is_apprentice', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Jockeys',
            },
        ),
        migrations.CreateModel(
            name='Meeting',
            fields=[
                ('meetingId', models.IntegerField(primary_key=True, serialize=False)),
                ('date', models.DateField(db_index=True)),
                ('isTrial', models.BooleanField(default=False)),
                ('stage', models.CharField(max_length=50)),
                ('startTimeUtc', models.DateTimeField(blank=True, null=True)),
                ('name', models.CharField(blank=True, max_length=200)),
                ('category', models.CharField(blank=True, max_length=50)),
                ('meeting_type', models.CharField(blank=True, max_length=20)),
                ('time_slot', models.CharField(blank=True, max_length=20)),
                ('rail_position', models.CharField(blank=True, max_length=50)),
                ('weather_condition', models.CharField(blank=True, max_length=50)),
                ('temperature', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('tab_status', models.BooleanField(default=False)),
            ],
        ),
        migrations.CreateModel(
            name='PredictorPreset',
            fields=[
                ('preset_id', models.PositiveSmallIntegerField(primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=20, unique=True)),
            ],
            options={
                'verbose_name_plural': 'Predictor Presets',
            },
        ),
        migrations.CreateModel(
            name='Track',
            fields=[
                ('trackId', models.IntegerField(primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
                ('countryIso2', models.CharField(max_length=2)),
                ('address', models.CharField(blank=True, max_length=255)),
                ('circumference', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('straight', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('is_clockwise', models.BooleanField(null=True)),
                ('sprint_lane', models.BooleanField(default=False)),
                ('surface', models.CharField(blank=True, max_length=20)),
            ],
            options={
                'verbose_name_plural': 'Track Details',
            },
        ),
        migrations.CreateModel(
            name='Trainer',
            fields=[
                ('trainer_id', models.BigIntegerField(primary_key=True, serialize=False)),
                ('name', models.CharField(db_index=True, max_length=255)),
                ('last_win', models.DateField(blank=True, null=True)),
                ('total_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=14, null=True)),
                ('average_prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=12, null=True)),
                ('location', models.CharField(blank=True, max_length=100)),
                ('postcode', models.CharField(blank=True, max_length=10)),
                ('state', models.CharField(blank=True, max_length=10)),
                ('title', models.CharField(blank=True, max_length=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name_plural': 'Trainers',
            },
        ),
        migrations.CreateModel(
            name='Race',
            fields=[
                ('raceId', models.IntegerField(primary_key=True, serialize=False)),
                ('number', models.IntegerField()),
                ('isAbandoned', models.BooleanField(default=False)),
                ('stage', models.CharField(max_length=50)),
                ('name', models.CharField(blank=True, max_length=300)),
                ('distance', models.PositiveIntegerField(blank=True, null=True)),
                ('distance_units', models.CharField(blank=True, max_length=50)),
                ('prize_money', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('start_type', models.CharField(blank=True, max_length=20)),
                ('startTimeUtc', models.DateTimeField(blank=True, null=True)),
                ('track_condition', models.CharField(blank=True, max_length=20)),
                ('track_condition_rating', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('track_type', models.CharField(blank=True, max_length=20)),
                ('entry_conditions', models.JSONField(blank=True, max_length=500)),
                ('official_time', models.DurationField(blank=True, null=True)),
                ('last_600_time', models.DurationField(blank=True, null=True)),
                ('race_starters', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('meeting', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='races', to='horse_race.meeting')),
            ],
        ),
        migrations.CreateModel(
            name='Selection',
            fields=[
                ('selectionId', models.IntegerField(primary_key=True, serialize=False)),
                ('number', models.IntegerField(blank=True, null=True)),
                ('barrier', models.IntegerField(blank=True, null=True)),
                ('isScratched', models.BooleanField(default=False)),
                ('isEmergency', models.BooleanField(default=False)),
                ('weight', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('claim', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('handicap_rating', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('gear_current', models.TextField(blank=True)),
                ('gear_changes', models.TextField(blank=True)),
                ('racing_colours', models.CharField(blank=True, max_length=255)),
                ('silks_image', models.URLField(blank=True)),
                ('starting_price', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('result_position', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('result_label', models.CharField(blank=True, max_length=20)),
                ('margin_decimal', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('weight_carried', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('in_running_positions', models.JSONField(blank=True, default=list)),
                ('horse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='horse_race.horse')),
                ('jockey', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='horse_race.jockey')),
                ('race', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='selections', to='horse_race.race')),
                ('trainer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='horse_race.trainer')),
            ],
            options={
                'unique_together': {('race', 'number')},
            },
        ),
        migrations.AddField(
            model_name='race',
            name='second',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='races_second', to='horse_race.selection'),
        ),
        migrations.AddField(
            model_name='race',
            name='third',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='races_third', to='horse_race.selection'),
        ),
        migrations.AddField(
            model_name='race',
            name='winner',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='races_won', to='horse_race.selection'),
        ),
        migrations.AddField(
            model_name='meeting',
            name='track',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='horse_race.track'),
        ),
        migrations.AlterUniqueTogether(
            name='race',
            unique_together={('meeting', 'number')},
        ),
        migrations.CreateModel(
            name='PredictorRating',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('normalised_rating', models.DecimalField(db_index=True, decimal_places=5, max_digits=6)),
                ('rating_100', models.PositiveSmallIntegerField(db_index=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('preset', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='horse_race.predictorpreset')),
                ('selection', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='predictor_ratings', to='horse_race.selection')),
            ],
            options={
                'indexes': [models.Index(fields=['rating_100'], name='horse_race__rating__fd98cc_idx'), models.Index(fields=['preset', 'rating_100'], name='horse_race__preset__0ab3a4_idx')],
                'unique_together': {('selection', 'preset')},
            },
        ),
        migrations.CreateModel(
            name='HorseRaceHistory',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('finish_position', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('margin', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('starting_price', models.DecimalField(blank=True, decimal_places=2, max_digits=6, null=True)),
                ('in_running', models.JSONField(blank=True, default=list)),
                ('is_trial', models.BooleanField(default=False)),
                ('horse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='race_history', to='horse_race.horse')),
                ('race', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='horse_race.race')),
                ('selection', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='horse_race.selection')),
            ],
            options={
                'ordering': ['-race__meeting__date'],
                'unique_together': {('horse', 'race')},
            },
        ),
        migrations.CreateModel(
            name='HorseStatistic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('barrier', 'Barrier'), ('distance', 'Distance Range'), ('track', 'Track'), ('track_condition', 'Track Condition'), ('track_surface', 'Track Surface'), ('resuming', 'Resuming'), ('weight', 'Weight Carried'), ('direction', 'Direction'), ('field_size', 'Field Size'), ('group_race', 'Group Race'), ('period', 'Period')], db_index=True, max_length=20)),
                ('value', models.CharField(db_index=True, max_length=100)),
                ('runs', models.PositiveIntegerField()),
                ('wins', models.PositiveIntegerField()),
                ('seconds', models.PositiveIntegerField()),
                ('thirds', models.PositiveIntegerField()),
                ('win_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('place_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('roi', models.DecimalField(decimal_places=3, max_digits=8)),
                ('horse', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statistics', to='horse_race.horse')),
                ('track', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='horse_race.track')),
            ],
            options={
                'indexes': [models.Index(fields=['category', 'value'], name='horse_race__categor_3f98f1_idx'), models.Index(fields=['win_percentage'], name='horse_race__win_per_f661bf_idx'), models.Index(fields=['place_percentage'], name='horse_race__place_p_f53ea8_idx'), models.Index(fields=['horse', 'category'], name='horse_race__horse_i_9fca70_idx')],
                'unique_together': {('horse', 'category', 'value', 'track')},
            },
        ),
        migrations.CreateModel(
            name='JockeyStatistic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('barrier', 'Barrier (Last 12 Months)'), ('distance', 'Distance (Last 12 Months)'), ('field_size', 'Field Size (Last 12 Months)'), ('group_race', 'Group Race (Last 12 Months)'), ('track_condition', 'Track Condition (Last 12 Months)'), ('track', 'Track (Last 12 Months)'), ('trainer', 'With Trainer (Last 12 Months)'), ('period', 'Period')], db_index=True, max_length=20)),
                ('value', models.CharField(db_index=True, max_length=100)),
                ('runs', models.PositiveIntegerField()),
                ('wins', models.PositiveIntegerField()),
                ('seconds', models.PositiveIntegerField()),
                ('thirds', models.PositiveIntegerField()),
                ('win_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('place_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('roi', models.DecimalField(decimal_places=3, max_digits=8)),
                ('jockey', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statistics', to='horse_race.jockey')),
                ('track', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='horse_race.track')),
                ('trainer', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='horse_race.trainer')),
            ],
            options={
                'indexes': [models.Index(fields=['category', 'value'], name='horse_race__categor_3f79ee_idx'), models.Index(fields=['win_percentage'], name='horse_race__win_per_7e27fd_idx'), models.Index(fields=['jockey', 'category'], name='horse_race__jockey__83decf_idx')],
                'unique_together': {('jockey', 'category', 'value', 'track', 'trainer')},
            },
        ),
        migrations.CreateModel(
            name='TrainerStatistic',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('distance', 'Distance (Last 12 Months)'), ('group_race', 'Group Race (Last 12 Months)'), ('resuming', 'Resuming (Last 12 Months)'), ('track', 'Track (Last 12 Months)'), ('jockey', 'With Jockey (Last 12 Months)'), ('period', 'Period')], db_index=True, max_length=20)),
                ('value', models.CharField(db_index=True, max_length=100)),
                ('runs', models.PositiveIntegerField()),
                ('wins', models.PositiveIntegerField()),
                ('seconds', models.PositiveIntegerField()),
                ('thirds', models.PositiveIntegerField()),
                ('win_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('place_percentage', models.DecimalField(decimal_places=3, max_digits=6)),
                ('roi', models.DecimalField(decimal_places=3, max_digits=8)),
                ('jockey', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='horse_race.jockey')),
                ('track', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='horse_race.track')),
                ('trainer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='statistics', to='horse_race.trainer')),
            ],
            options={
                'indexes': [models.Index(fields=['category', 'value'], name='horse_race__categor_daa45f_idx'), models.Index(fields=['win_percentage'], name='horse_race__win_per_4ad78f_idx'), models.Index(fields=['trainer', 'category'], name='horse_race__trainer_572942_idx')],
                'unique_together': {('trainer', 'category', 'value', 'track', 'jockey')},
            },
        ),
    ]
